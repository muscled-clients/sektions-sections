{% style %}
  #shopify-section-{{ section.id }} {
    --hero18-bg: {{ section.settings.background_color }};
    --hero18-heading-color: {{ section.settings.heading_color }};
    --hero18-text-color: {{ section.settings.text_color }};
    --hero18-accent: {{ section.settings.accent_color }};
    --hero18-sticker-bg: {{ section.settings.sticker_background }};
    --hero18-sticker-text: {{ section.settings.sticker_text_color }};
    display: block;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    margin-top: {{ section.settings.margin_top | times: 0.7 }}px;
    margin-bottom: {{ section.settings.margin_bottom | times: 0.7 }}px;
  }

  @media (min-width: 550px) {
    #shopify-section-{{ section.id }} {
      margin-top: {{ section.settings.margin_top | times: 0.8 }}px;
      margin-bottom: {{ section.settings.margin_bottom | times: 0.8 }}px;
    }
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} {
      margin-top: {{ section.settings.margin_top | times: 0.9 }}px;
      margin-bottom: {{ section.settings.margin_bottom | times: 0.9 }}px;
    }
  }

  @media (min-width: 1024px) {
    #shopify-section-{{ section.id }} {
      margin-top: {{ section.settings.margin_top }}px;
      margin-bottom: {{ section.settings.margin_bottom }}px;
    }
  }
{% endstyle %}

<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Bebas+Neue&display=swap');

  .hero-18 *,
  .hero-18 *::before,
  .hero-18 *::after {
    box-sizing: border-box;
  }

  .hero-18 {
    display: block;
    width: 100%;
    background: var(--hero18-bg, #fff);
    font-family: 'Montserrat', sans-serif;
    overflow: hidden;
  }

  .hero-18__container {
    position: relative;
    max-width: 1400px;
    margin: 0 auto;
    text-align: center;
  }

  /* Logo/Heading at top - Mobile First */
  .hero-18__header {
    padding: 20px 12px 0;
  }

  .hero-18__logo {
    margin-bottom: 0;
  }

  .hero-18__logo-image {
    max-width: 180px;
    height: auto;
  }

  /* Heading - Mobile First */
  .hero-18__heading {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 48px;
    font-weight: 400;
    color: var(--hero18-heading-color, #000);
    margin: 0;
    line-height: 0.9;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .hero-18__heading-accent {
    color: var(--hero18-accent, #ff6c1c);
  }

  /* Subtitle - Mobile First */
  .hero-18__subtitle {
    font-size: 12px;
    font-weight: 400;
    color: var(--hero18-text-color, #666);
    margin: 10px auto 0;
    max-width: 500px;
    line-height: 1.5;
    padding: 0 12px;
  }

  /* Image Container - Mobile First */
  .hero-18__image-wrapper {
    position: relative;
    width: 100%;
    margin-top: -15px;
  }

  .hero-18__image {
    width: 100%;
    height: auto;
    display: block;
    aspect-ratio: 4 / 3;
    object-fit: cover;
  }

  /* Button - Mobile First */
  .hero-18__button {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--hero18-heading-color, #000);
    color: var(--hero18-bg, #fff);
    padding: 10px 18px;
    font-size: 11px;
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 6px;
    margin-top: 16px;
    transition: all 0.25s ease;
  }

  .hero-18__button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .hero-18__button svg {
    width: 14px;
    height: 14px;
  }

  /* Button wrapper - Mobile First */
  .hero-18__button-wrapper {
    padding: 16px 12px 28px;
    text-align: center;
  }

  /* Stickers - Mobile First (hidden by default on smallest screens) */
  .hero-18__sticker {
    position: absolute;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 10px 12px;
    background: var(--hero18-sticker-bg, #fff8eb);
    color: var(--hero18-sticker-text, #000);
    font-size: 9px;
    font-weight: 600;
    text-align: center;
    line-height: 1.3;
    z-index: 10;
    transition: transform 0.1s ease-out;
    max-width: 70px;
  }

  /* Speech bubble shape - left side */
  .hero-18__sticker--1 {
    top: 25%;
    left: 2%;
    border-radius: 50% 50% 50% 20%;
    transform: rotate(-8deg);
  }

  /* Cloud/blob shape - right bottom */
  .hero-18__sticker--2 {
    bottom: 5%;
    right: 2%;
    border-radius: 60% 40% 50% 40% / 50% 50% 40% 50%;
    transform: rotate(5deg);
  }

  /* Rounded blob - left bottom */
  .hero-18__sticker--3 {
    bottom: 15%;
    left: 5%;
    border-radius: 40% 60% 50% 50% / 50% 40% 60% 50%;
    transform: rotate(-5deg);
  }

  /* Pill shape - right top */
  .hero-18__sticker--4 {
    top: 25%;
    right: 3%;
    border-radius: 50% 50% 50% 50%;
    transform: rotate(10deg);
  }

  .hero-18__sticker-image {
    width: 40px;
    height: 40px;
    object-fit: contain;
  }

  /* Custom sticker colors from blocks */
  .hero-18__sticker[data-bg="cream"] { background: #fff8eb; }
  .hero-18__sticker[data-bg="lime"] { background: #b5fd9d; }
  .hero-18__sticker[data-bg="yellow"] { background: #eef390; }
  .hero-18__sticker[data-bg="orange"] { background: #ff6c1c; color: #fff; }
  .hero-18__sticker[data-bg="blue"] { background: #cce1f5; }
  .hero-18__sticker[data-bg="pink"] { background: #ffd4e5; }
  .hero-18__sticker[data-bg="white"] { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

  /* ============================================
     RESPONSIVE BREAKPOINTS
     ============================================ */

  /* 400px - Small mobile - Show 2 stickers */
  @media (min-width: 400px) {
    .hero-18__header {
      padding: 24px 14px 0;
    }

    .hero-18__heading {
      font-size: 56px;
      letter-spacing: 1px;
    }

    .hero-18__logo-image {
      max-width: 200px;
    }

    .hero-18__subtitle {
      font-size: 12px;
      margin-top: 12px;
    }

    .hero-18__image-wrapper {
      margin-top: -20px;
    }

    .hero-18__button {
      padding: 11px 20px;
      font-size: 11px;
    }

    .hero-18__button-wrapper {
      padding: 18px 14px 30px;
    }

    .hero-18__sticker--1,
    .hero-18__sticker--2 {
      display: flex;
    }

    .hero-18__sticker {
      font-size: 10px;
      padding: 11px 13px;
      max-width: 75px;
    }

    .hero-18__sticker-image {
      width: 45px;
      height: 45px;
    }
  }

  /* 550px - Large mobile */
  @media (min-width: 550px) {
    .hero-18__header {
      padding: 28px 20px 0;
    }

    .hero-18__heading {
      font-size: 68px;
      letter-spacing: 2px;
    }

    .hero-18__logo-image {
      max-width: 230px;
    }

    .hero-18__subtitle {
      font-size: 13px;
      margin-top: 14px;
      padding: 0 16px;
    }

    .hero-18__image-wrapper {
      margin-top: -25px;
    }

    .hero-18__button {
      padding: 12px 22px;
      font-size: 12px;
      gap: 7px;
    }

    .hero-18__button svg {
      width: 15px;
      height: 15px;
    }

    .hero-18__button-wrapper {
      padding: 20px 16px 32px;
    }

    .hero-18__sticker {
      font-size: 11px;
      padding: 12px 14px;
      max-width: 85px;
    }

    .hero-18__sticker--1 {
      top: 28%;
      left: 3%;
    }

    .hero-18__sticker--2 {
      bottom: 6%;
      right: 3%;
    }

    .hero-18__sticker-image {
      width: 50px;
      height: 50px;
    }
  }

  /* 768px - Tablet - Show all 4 stickers */
  @media (min-width: 768px) {
    .hero-18__header {
      padding: 40px 32px 0;
    }

    .hero-18__heading {
      font-size: 100px;
      letter-spacing: 2px;
    }

    .hero-18__logo-image {
      max-width: 280px;
    }

    .hero-18__subtitle {
      font-size: 14px;
      margin-top: 16px;
      padding: 0 20px;
    }

    .hero-18__image-wrapper {
      margin-top: -40px;
    }

    .hero-18__image {
      aspect-ratio: 16 / 10;
    }

    .hero-18__button {
      padding: 13px 26px;
      font-size: 12px;
      gap: 8px;
      border-radius: 7px;
    }

    .hero-18__button svg {
      width: 16px;
      height: 16px;
    }

    .hero-18__button-wrapper {
      padding: 22px 20px 36px;
    }

    .hero-18__sticker--1,
    .hero-18__sticker--2,
    .hero-18__sticker--3,
    .hero-18__sticker--4 {
      display: flex;
    }

    .hero-18__sticker {
      font-size: 13px;
      padding: 15px 18px;
      max-width: 100px;
    }

    .hero-18__sticker--1 {
      top: 32%;
      left: 4%;
    }

    .hero-18__sticker--2 {
      bottom: 8%;
      right: 6%;
    }

    .hero-18__sticker--3 {
      bottom: 18%;
      left: 6%;
    }

    .hero-18__sticker--4 {
      top: 28%;
      right: 4%;
    }

    .hero-18__sticker-image {
      width: 60px;
      height: 60px;
    }
  }

  /* 1024px - Desktop */
  @media (min-width: 1024px) {
    .hero-18__header {
      padding: 50px 40px 0;
    }

    .hero-18__heading {
      font-size: 130px;
      letter-spacing: 3px;
    }

    .hero-18__logo-image {
      max-width: 320px;
    }

    .hero-18__subtitle {
      font-size: 15px;
    }

    .hero-18__image-wrapper {
      margin-top: -60px;
    }

    .hero-18__button {
      padding: 14px 28px;
      font-size: 13px;
      border-radius: 8px;
    }

    .hero-18__button-wrapper {
      padding: 24px 20px 40px;
    }

    .hero-18__sticker {
      font-size: 14px;
      padding: 17px 22px;
      max-width: 115px;
    }

    .hero-18__sticker--1 {
      top: 30%;
      left: 6%;
    }

    .hero-18__sticker--2 {
      bottom: 10%;
      right: 8%;
    }

    .hero-18__sticker--3 {
      bottom: 22%;
      left: 8%;
    }

    .hero-18__sticker--4 {
      top: 26%;
      right: 6%;
    }

    .hero-18__sticker-image {
      width: 75px;
      height: 75px;
    }
  }

  /* 1400px - Large desktop */
  @media (min-width: 1400px) {
    .hero-18__header {
      padding: 60px 60px 0;
    }

    .hero-18__heading {
      font-size: 160px;
      letter-spacing: 4px;
    }

    .hero-18__logo-image {
      max-width: 350px;
    }

    .hero-18__image-wrapper {
      margin-top: -80px;
    }

    .hero-18__button {
      padding: 15px 30px;
      font-size: 14px;
    }

    .hero-18__sticker {
      font-size: 16px;
      padding: 20px 28px;
      max-width: 130px;
    }

    .hero-18__sticker--1 {
      top: 30%;
      left: 8%;
    }

    .hero-18__sticker--2 {
      bottom: 12%;
      right: 10%;
      max-width: 120px;
    }

    .hero-18__sticker--3 {
      bottom: 25%;
      left: 10%;
      max-width: 120px;
    }

    .hero-18__sticker--4 {
      top: 25%;
      right: 8%;
      max-width: 115px;
    }

    .hero-18__sticker-image {
      width: 90px;
      height: 90px;
    }
  }
</style>

<section class="hero-18" data-section-id="{{ section.id }}">
  <div class="hero-18__container">
    <!-- Header with Logo/Heading -->
    <div class="hero-18__header">
      {%- if section.settings.logo != blank -%}
        <div class="hero-18__logo">
          <img
            src="{{ section.settings.logo | image_url: width: 700 }}"
            alt="{{ shop.name }}"
            class="hero-18__logo-image"
            loading="eager"
          >
        </div>
      {%- elsif section.settings.heading != blank -%}
        <h1 class="hero-18__heading">
          {{ section.settings.heading }}
          {%- if section.settings.heading_accent != blank -%}
            <span class="hero-18__heading-accent">{{ section.settings.heading_accent }}</span>
          {%- endif -%}
        </h1>
      {%- endif -%}

      {%- if section.settings.subtitle != blank -%}
        <p class="hero-18__subtitle">{{ section.settings.subtitle }}</p>
      {%- endif -%}
    </div>

    <!-- Full-width Image with Stickers -->
    <div class="hero-18__image-wrapper">
      {%- if section.settings.image != blank -%}
        <img
          src="{{ section.settings.image | image_url: width: 2000 }}"
          alt="{{ section.settings.heading | default: 'Hero image' }}"
          class="hero-18__image"
          loading="eager"
        >
      {%- else -%}
        {{ 'lifestyle-1' | placeholder_svg_tag: 'hero-18__image' }}
      {%- endif -%}

      <!-- Stickers overlaying the image -->
      {%- assign sticker_index = 0 -%}
      {%- for block in section.blocks -%}
        {%- if block.type == 'sticker' -%}
          {%- assign sticker_index = sticker_index | plus: 1 -%}
          <div
            class="hero-18__sticker hero-18__sticker--{{ sticker_index }}"
            data-bg="{{ block.settings.sticker_color }}"
            data-parallax="{{ block.settings.parallax_speed }}"
            {{ block.shopify_attributes }}
          >
            {%- if block.settings.sticker_image != blank -%}
              <img
                src="{{ block.settings.sticker_image | image_url: width: 200 }}"
                alt="{{ block.settings.sticker_text }}"
                class="hero-18__sticker-image"
                loading="lazy"
              >
            {%- else -%}
              {{ block.settings.sticker_text }}
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    {%- if section.settings.button_text != blank -%}
      <div class="hero-18__button-wrapper">
        <a href="{{ section.settings.button_link }}" class="hero-18__button">
          {{ section.settings.button_text }}
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const section = document.querySelector('.hero-18[data-section-id="{{ section.id }}"]');
  if (!section) return;

  const stickers = section.querySelectorAll('.hero-18__sticker');
  if (stickers.length === 0) return;

  let lastScrollY = window.scrollY;
  let ticking = false;

  function updateStickers() {
    const rect = section.getBoundingClientRect();
    const sectionTop = rect.top;
    const sectionBottom = rect.bottom;
    const windowHeight = window.innerHeight;

    // Only animate when section is in view
    if (sectionBottom < 0 || sectionTop > windowHeight) {
      ticking = false;
      return;
    }

    const scrollDelta = window.scrollY - lastScrollY;

    stickers.forEach((sticker, index) => {
      const speed = parseFloat(sticker.dataset.parallax) || (0.5 + index * 0.3);
      const currentTransform = sticker.style.transform || '';
      const baseRotation = sticker.classList.contains('hero-18__sticker--1') ? -12 :
                          sticker.classList.contains('hero-18__sticker--2') ? 15 :
                          sticker.classList.contains('hero-18__sticker--3') ? -8 : 10;

      // Get current translateY or start at 0
      const match = currentTransform.match(/translateY\(([^)]+)px\)/);
      let currentY = match ? parseFloat(match[1]) : 0;

      // Update Y position based on scroll
      currentY += scrollDelta * speed * 0.1;

      // Clamp the value
      currentY = Math.max(-50, Math.min(50, currentY));

      sticker.style.transform = `rotate(${baseRotation}deg) translateY(${currentY}px)`;
    });

    lastScrollY = window.scrollY;
    ticking = false;
  }

  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(updateStickers);
      ticking = true;
    }
  });
});
</script>

{% schema %}
{
  "name": "SEK Hero 18",
  "tag": "section",
  "class": "section-hero-18",
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image",
      "info": "Optional brand logo above heading"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Discover Our Collection"
    },
    {
      "type": "text",
      "id": "heading_accent",
      "label": "Heading accent text",
      "info": "This text will be displayed in the accent color"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Explore our carefully curated selection of premium products designed for modern living."
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Hero image"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#ff6c1c"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Image border color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "sticker_background",
      "label": "Default sticker background",
      "default": "#b5fd9d"
    },
    {
      "type": "color",
      "id": "sticker_text_color",
      "label": "Default sticker text",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "sticker",
      "name": "Sticker",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "sticker_text",
          "label": "Sticker text",
          "default": "New!"
        },
        {
          "type": "image_picker",
          "id": "sticker_image",
          "label": "Sticker image",
          "info": "Use instead of text for custom sticker graphics"
        },
        {
          "type": "select",
          "id": "sticker_color",
          "label": "Sticker color",
          "options": [
            { "value": "cream", "label": "Cream" },
            { "value": "lime", "label": "Lime green" },
            { "value": "yellow", "label": "Yellow" },
            { "value": "orange", "label": "Orange" },
            { "value": "blue", "label": "Light blue" },
            { "value": "pink", "label": "Pink" },
            { "value": "white", "label": "White" }
          ],
          "default": "cream"
        },
        {
          "type": "range",
          "id": "parallax_speed",
          "label": "Parallax speed",
          "min": 0,
          "max": 2,
          "step": 0.1,
          "default": 0.5,
          "info": "0 = no movement, 2 = fast"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "SEK Hero 18",
      "blocks": [
        {
          "type": "sticker",
          "settings": {
            "sticker_text": "Buy two or more & save 15%",
            "sticker_color": "cream",
            "parallax_speed": 0.5
          }
        },
        {
          "type": "sticker",
          "settings": {
            "sticker_text": "FREE shipping",
            "sticker_color": "cream",
            "parallax_speed": 0.6
          }
        }
      ]
    }
  ]
}
{% endschema %}
