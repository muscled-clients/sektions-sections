<style>
  #gallery-section-{{ section.id }} {
    width: 100%;
    {% if section.settings.max_width == '100%' %}
      padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px 0;
    {% else %}
      padding: {{ section.settings.padding_top }}px 20px {{ section.settings.padding_bottom }}px 20px;
    {% endif %}
  }

  #gallery-section-{{ section.id }} .gallery__container {
    {% if section.settings.max_width == '100%' %}
      max-width: 100%;
    {% elsif section.settings.max_width == '1200px' %}
      max-width: 1200px;
    {% elsif section.settings.max_width == '1400px' %}
      max-width: 1400px;
    {% elsif section.settings.max_width == '1600px' %}
      max-width: 1600px;
    {% else %}
      max-width: 1400px;
    {% endif %}
    margin: 0 auto;
  }

  #gallery-section-{{ section.id }} .gallery__header {
    text-align: center;
    margin-bottom: 40px;
  }

  #gallery-section-{{ section.id }} .gallery__heading {
    font-size: clamp(32px, 4vw, 44px);
    font-weight: 700;
    color: #000;
    line-height: 1.1;
    margin-bottom: 16px;
  }

  #gallery-section-{{ section.id }} .gallery__subheading {
    font-size: clamp(14px, 2vw, 18px);
    color: #666;
    font-weight: 400;
    line-height: 1.4;
    max-width: 950px;
    margin: 0 auto;
  }

  #gallery-section-{{ section.id }} .gallery__grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-auto-rows: 300px;
    gap: 0;
    width: 100%;
  }

  #gallery-section-{{ section.id }} .gallery__item {
    position: relative;
    overflow: hidden;
    display: block;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(1) {
    grid-column: 1 / 2;
    grid-row: 1;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(2) {
    grid-column: 2 / 3;
    grid-row: 1;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(3) {
    grid-column: 3 / 4;
    grid-row: 1;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(4) {
    grid-column: 1 / 2;
    grid-row: 2;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(5) {
    grid-column: 2 / 3;
    grid-row: 2;
  }

  #gallery-section-{{ section.id }} .gallery__item:nth-child(6) {
    grid-column: 3 / 4;
    grid-row: 2;
  }

  #gallery-section-{{ section.id }} .gallery__item--tall {
    grid-column: 4 / 6;
    grid-row: 1 / span 2;
  }

  #gallery-section-{{ section.id }} .gallery__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Large Tablet */
  @media screen and (max-width: 1200px) {
    #gallery-section-{{ section.id }} .gallery__grid {
      grid-auto-rows: 280px;
    }
  }

  /* Tablet */
  @media screen and (max-width: 992px) {
    #gallery-section-{{ section.id }} .gallery__grid {
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 240px;
    }

    #gallery-section-{{ section.id }} .gallery__item--tall {
      grid-column: 3 / 4;
      grid-row: 1 / span 2;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(3) {
      grid-column: 1 / 2;
      grid-row: 2 / 3;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(4) {
      grid-column: 2 / 3;
      grid-row: 2 / 3;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(5) {
      grid-column: 1 / 2;
      grid-row: 3 / 4;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(6) {
      grid-column: 2 / 3;
      grid-row: 3 / 4;
    }
  }

  /* Mobile */
  @media screen and (max-width: 640px) {
    #gallery-section-{{ section.id }} .gallery__grid {
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: 200px 200px 200px 400px;
      gap: 0;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(1) {
      grid-column: 1 / 2;
      grid-row: 1;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(2) {
      grid-column: 2 / 3;
      grid-row: 1;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(3) {
      grid-column: 1 / 2;
      grid-row: 2;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(4) {
      grid-column: 2 / 3;
      grid-row: 2;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(5) {
      grid-column: 1 / 2;
      grid-row: 3;
    }

    #gallery-section-{{ section.id }} .gallery__item:nth-child(6) {
      grid-column: 2 / 3;
      grid-row: 3;
    }

    #gallery-section-{{ section.id }} .gallery__item--tall {
      grid-column: 1 / 3;
      grid-row: 4;
    }

    #gallery-section-{{ section.id }} .gallery__header {
      margin-bottom: 30px;
    }
  }

  @media screen and (max-width: 480px) {
    #gallery-section-{{ section.id }} .gallery__grid {
      grid-template-rows: 180px 180px 180px 360px;
    }

    {% if section.settings.max_width != '100%' %}
      #gallery-section-{{ section.id }} {
        padding-left: 15px;
        padding-right: 15px;
      }
    {% endif %}
  }
</style>

<section id="gallery-section-{{ section.id }}">
  <div class="gallery__container">
    <div class="gallery__header">
      <h2 class="gallery__heading">{{ section.settings.heading }}</h2>
      <p class="gallery__subheading">{{ section.settings.subheading }}</p>
    </div>

    <div class="gallery__grid">
      {% for i in (1..7) %}
        {% assign image_setting = 'image_' | append: i %}
        {% assign link_setting = 'link_' | append: i %}
        {% assign alt_setting = 'alt_' | append: i %}

        {% if section.settings[link_setting] != blank %}
          <a href="{{ section.settings[link_setting] }}" class="gallery__item {% if i == 7 %}gallery__item--tall{% endif %}">
        {% else %}
          <div class="gallery__item {% if i == 7 %}gallery__item--tall{% endif %}">
        {% endif %}

        {% if section.settings[image_setting] != blank %}
          <img
            src="{{ section.settings[image_setting] | img_url: '600x600' }}"
            srcset="{{ section.settings[image_setting] | img_url: '400x400' }} 400w,
                    {{ section.settings[image_setting] | img_url: '600x600' }} 600w,
                    {{ section.settings[image_setting] | img_url: '800x800' }} 800w"
            sizes="(max-width: 640px) 50vw, (max-width: 992px) 33vw, 25vw"
            alt="{{ section.settings[alt_setting] | default: section.settings.heading }}"
            class="gallery__image"
            loading="{% if i <= 2 %}eager{% else %}lazy{% endif %}"
            width="{{ section.settings[image_setting].width }}"
            height="{{ section.settings[image_setting].height }}"
          >
        {% else %}
          {{ 'product-' | append: i | placeholder_svg_tag: 'gallery__image' }}
        {% endif %}

        {% if section.settings[link_setting] != blank %}
          </a>
        {% else %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product Gallery",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Discover our most popular products"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Make sure to tag @section.store on Instagram to be featured in our gallery!"
    },
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "select",
      "id": "max_width",
      "label": "Container Max Width",
      "options": [
        {
          "value": "100%",
          "label": "Full Width"
        },
        {
          "value": "1200px",
          "label": "1200px"
        },
        {
          "value": "1400px",
          "label": "1400px"
        },
        {
          "value": "1600px",
          "label": "1600px"
        }
      ],
      "default": "1400px"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Top Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 60
    },
    {
      "type": "header",
      "content": "Gallery Images"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image 1 (Top Left)"
    },
    {
      "type": "url",
      "id": "link_1",
      "label": "Image 1 Link"
    },
    {
      "type": "text",
      "id": "alt_1",
      "label": "Image 1 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image 2 (Top Center)"
    },
    {
      "type": "url",
      "id": "link_2",
      "label": "Image 2 Link"
    },
    {
      "type": "text",
      "id": "alt_2",
      "label": "Image 2 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_3",
      "label": "Image 3 (Top Right)"
    },
    {
      "type": "url",
      "id": "link_3",
      "label": "Image 3 Link"
    },
    {
      "type": "text",
      "id": "alt_3",
      "label": "Image 3 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_4",
      "label": "Image 4 (Bottom Left)"
    },
    {
      "type": "url",
      "id": "link_4",
      "label": "Image 4 Link"
    },
    {
      "type": "text",
      "id": "alt_4",
      "label": "Image 4 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_5",
      "label": "Image 5 (Bottom Center)"
    },
    {
      "type": "url",
      "id": "link_5",
      "label": "Image 5 Link"
    },
    {
      "type": "text",
      "id": "alt_5",
      "label": "Image 5 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_6",
      "label": "Image 6 (Bottom Right)"
    },
    {
      "type": "url",
      "id": "link_6",
      "label": "Image 6 Link"
    },
    {
      "type": "text",
      "id": "alt_6",
      "label": "Image 6 Alt Text"
    },
    {
      "type": "image_picker",
      "id": "image_7",
      "label": "Image 7 (Tall Right - Spans 2 Rows)"
    },
    {
      "type": "url",
      "id": "link_7",
      "label": "Image 7 Link"
    },
    {
      "type": "text",
      "id": "alt_7",
      "label": "Image 7 Alt Text"
    }
  ],
  "presets": [
    {
      "name": "Product Gallery",
      "category": "Image"
    }
  ]
}
{% endschema %}